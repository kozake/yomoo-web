{"version":3,"sources":["../../src/pages/book-list/book-list.module.ts","../../src/pages/book-list/book-list.ts"],"names":[],"mappings":"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","file":"12.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BookListPage } from './book-list';\n\n@NgModule({\n  declarations: [\n    BookListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BookListPage),\n  ],\n  exports: [\n    BookListPage\n  ]\n})\nexport class BookListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book-list/book-list.module.ts","import { Component } from '@angular/core';\nimport { IonicPage,\n         NavController,\n         PopoverController,\n         ModalController,\n         AlertController,\n         MenuController,\n         ItemSliding } from 'ionic-angular';\nimport { AppReadingBookProvider,\n         AppLoadingProvider } from '../../providers';\nimport { AppReadingBook, AppReadingLog } from '../../models'\n\n@IonicPage({\n  name: 'BookListPage',\n  segment: 'book-list'\n})\n@Component({\n  selector: 'page-book-list',\n  templateUrl: 'book-list.html'\n})\nexport class BookListPage {\n\n  statusEnum = AppReadingBook.ReadingStatusEnum;\n\n  readingState: AppReadingBook.ReadingStatusEnum = this.statusEnum.UNREAD;\n\n  books: Array<AppReadingBook> = [];\n\n  constructor(public navCtrl: NavController,\n              public popoverCtrl: PopoverController,\n              public modalCtrl: ModalController,\n              public alertCtrl: AlertController,\n              public menuCtrl: MenuController,\n              private appReadingBookProvider: AppReadingBookProvider,\n              private loading: AppLoadingProvider) {\n  }\n\n  ionViewDidLoad() {\n\n    this.loadBooks();\n  }\n\n  getBooks() {\n    this.books = this.books.sort((a, b) => {\n      if (!a.getLastReadingLog() || !b.getLastReadingLog()) {\n        return null;\n      } else {\n        return b.getLastReadingLog().compareTo(a.getLastReadingLog())\n      }\n    });\n    return this.books.filter(books => books.readingStatus === this.readingState);\n  }\n\n  doAdd(event: Event) {\n\n    // let howToAddBookPopup = this.popoverCtrl.create(\n    //   HowToAddBookPage, {}, {cssClass: \"app-popover-box-shadow-none\"});\n    // howToAddBookPopup.present();\n    // howToAddBookPopup.onDidDismiss((data: any, role: any) => {\n    //   console.log(data);\n    //   if (data == 'hand') {\n    //     this.goToBookPage();\n    //   } else if (data == 'amazon') {\n    //     this.goToBookSearchPage();\n    //   }\n    // })\n\n    // TODO\n    // 時間もないので、一旦Amazon限定\n    this.goToBookSearchPage();\n  }\n\n  doSelect(event: Event, book:AppReadingBook) {\n\n    this.navCtrl.push('ReadingBookPage', {book: book, callback: (book) => {\n\n      let index = this.books.findIndex(b => b.id == book.id);\n      if (index != -1) {\n        this.books.splice(index, 1, book);\n      }\n    }});\n  }\n\n  doEdit(event: Event, slidingItem: ItemSliding, book:AppReadingBook) {\n\n    this.goToBookPage(book).then(() => {\n      slidingItem.close();\n    })\n  }\n\n  doDelete(event: Event, slidingItem: ItemSliding, book:AppReadingBook) {\n\n    slidingItem.close();\n    let confirm = this.alertCtrl.create({\n      title: '削除',\n      message: '読書履歴を含む全てのデータを削除します。よろしいですか？',\n      buttons: [\n        {\n          text: 'はい',\n          handler: () => {\n            this.deleteBook(book);\n          }\n        },\n        {\n          text: 'いいえ',\n          handler: () => {\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  doRefresh(refresher) {\n\n    this.loadBooks().then(any => {\n      refresher.complete();\n    });\n  }\n\n  doUnread(event: Event, slidingItem: ItemSliding, book:AppReadingBook) {\n    \n    slidingItem.close();\n    let confirm = this.alertCtrl.create({\n      title: '未読',\n      message: '全ての読書履歴を削除して未読にします。よろしいですか？',\n      buttons: [\n        {\n          text: 'はい',\n          handler: () => {\n            book.appReadingLogs = new Array<AppReadingLog>();\n            book.readingStatus = AppReadingBook.ReadingStatusEnum.UNREAD;\n            this.updateBook(book);\n          }\n        },\n        {\n          text: 'いいえ',\n          handler: () => {\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  doReading(event: Event, slidingItem: ItemSliding, book:AppReadingBook) {\n    \n    slidingItem.close();\n    let confirm = this.alertCtrl.create({\n      title: '読書中',\n      message: '読書中にします。よろしいですか？',\n      buttons: [\n        {\n          text: 'はい',\n          handler: () => {\n            book.readingStatus = AppReadingBook.ReadingStatusEnum.READING;\n            this.updateBook(book);\n          }\n        },\n        {\n          text: 'いいえ',\n          handler: () => {\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  doFinished(event: Event, slidingItem: ItemSliding, book:AppReadingBook) {\n    \n    slidingItem.close();\n    let confirm = this.alertCtrl.create({\n      title: '読了',\n      message: '読了にします。よろしいですか？',\n      buttons: [\n        {\n          text: 'はい',\n          handler: () => {\n            book.readingStatus = AppReadingBook.ReadingStatusEnum.FINISHED;\n            this.updateBook(book);\n          }\n        },\n        {\n          text: 'いいえ',\n          handler: () => {\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  private goToBookPage(book?: AppReadingBook): Promise<any> {\n\n    return this.navCtrl.push('BookPage', {book: book, callback: (book) => {\n      \n      let index = this.books.findIndex(b => b.id == book.id);\n      if (index != -1) {\n        this.books.splice(index, 1, book);\n      }\n    }});\n  }\n\n  private goToBookSearchPage() {\n\n      let bookSearchPage = this.modalCtrl.create('BookSearchPage');\n      bookSearchPage.present();\n      bookSearchPage.onDidDismiss((data: any, role: any) => {\n        if (data) {\n          let readingBook: AppReadingBook = new AppReadingBook({\n            bookTitle: data.title, \n            imageUrl: data.mediumImageURL,\n            isbn: data.asin,\n            pages: data.numberOfPages ? data.numberOfPages : 0,\n            appReadingLogs: [],\n            readingStatus: AppReadingBook.ReadingStatusEnum.UNREAD,\n            detailPageUrl: data.detailPageURL\n          });\n          this.createBook(readingBook);\n        }\n      })\n  }\n\n  private createBook(book:AppReadingBook) {\n\n    this.loading.start(() => {\n\n      return this.appReadingBookProvider.create(book).toPromise()\n      .then(\n        book => {\n          this.loadBooks();\n        }\n      ).catch(() => {\n        let alert = this.alertCtrl.create({\n          title: 'エラー',\n          subTitle: '保存に失敗しました。',\n          buttons: ['OK']\n        });\n        alert.present();\n      });\n    })\n  }\n\n  private updateBook(book:AppReadingBook) {\n\n    this.loading.start(() => {\n\n      return this.appReadingBookProvider.update(book).toPromise()\n      .then(response => this.loadBooks()\n      ).catch(() => {\n        let alert = this.alertCtrl.create({\n          title: 'エラー',\n          subTitle: '保存に失敗しました。',\n          buttons: ['OK']\n        });\n        alert.present();\n      });\n    });\n  }\n\n  private deleteBook(book: AppReadingBook) {\n    \n    this.loading.start(() => {\n\n      return this.appReadingBookProvider.delete(book.id).toPromise()\n      .then(\n        response => this.loadBooks()\n      ).catch(() => {\n        let alert = this.alertCtrl.create({\n          title: 'エラー',\n          subTitle: '削除に失敗しました。',\n          buttons: ['OK']\n        });\n        alert.present();\n      })\n    })\n  }\n\n  private loadBooks(): Promise<Array<AppReadingBook>> {\n\n    return this.loading.start(() => {\n\n      return this.appReadingBookProvider.getAll().toPromise().then(\n        books => {\n          this.books = books;\n          return Promise.resolve(books);\n        }\n      ).catch(\n        err => {\n          // 上に投げると画面がエラーなるね\n          // return Promise.reject(err);\n          console.log(\"ERROR!!!\")\n          console.log(err)\n          return null;\n        }\n      )\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book-list/book-list.ts"],"sourceRoot":""}