{"version":3,"sources":["../../src/pages/reading-chart/reading-chart.module.ts","../../src/components/chart/chart.module.ts","../../src/components/chart/chart.ts","../../src/pages/reading-chart/reading-chart.ts"],"names":[],"mappings":"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","file":"2.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChartComponentModule } from '../../components/chart/chart.module';\nimport { ReadingChartPage } from './reading-chart';\n\n@NgModule({\n  declarations: [\n    ReadingChartPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReadingChartPage),\n    ChartComponentModule,\n  ],\n  exports: [\n    ReadingChartPage\n  ]\n})\nexport class ReadingChartPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/reading-chart/reading-chart.module.ts","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\nimport { ChartComponent } from './chart';\n\n@NgModule({\n  declarations: [\n    ChartComponent,\n  ],\n  imports: [\n    IonicModule,\n  ],\n  exports: [\n    ChartComponent\n  ]\n})\nexport class ChartComponentModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chart/chart.module.ts","import { Component, Input, ElementRef } from '@angular/core';\nimport { DateUtils } from '../../utils/DateUtils'\n// import * as vis from 'vis';\ndeclare var vis: any;\n\n@Component({\n  selector: 'chart',\n  templateUrl: 'chart.html'\n})\nexport class ChartComponent {\n\n  @Input() style: string;\n\n  @Input() chartId: string;\n\n  @Input() items: any;\n\n  @Input() groups?: any = {};\n\n  @Input() options: any;\n\n  initialized: boolean;\n\n  constructor(public el: ElementRef) {\n  }\n\n  ngAfterViewInit() {\n    this.initChart();\n    this.initialized = true;\n  }\n\n  initChart() {\n    let container = this.el.nativeElement.children[0];\n\n    this.options.moment = function(date) {\n      return vis.moment(date).utcOffset(DateUtils.getTimezoneOffsetStr());\n    }\n\n    let graph2d = new vis.Graph2d(\n      container, \n      new vis.DataSet(this.items),\n      new vis.DataSet(this.groups),\n      this.options);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chart/chart.ts","import { Component } from '@angular/core';\nimport { DatePipe } from '@angular/common';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport * as models from '../../models';\n\n@IonicPage({\n  name: 'ReadingChartPage',\n  segment: 'reading-chart'\n})\n@Component({\n  selector: 'reading-chart',\n  templateUrl: 'reading-chart.html'\n})\nexport class ReadingChartPage {\n\n  book: models.AppReadingBook;\n\n  items: Array<any>;\n  groups: Array<any>;\n  options: any;\n\n  constructor(\n    private params: NavParams,\n    private navCtrl: NavController,\n    private datePipe: DatePipe\n  ) {\n    if (params.data) {\n      this.book = params.data;\n    }\n\n    this.items = [\n      // { x: '2014-06-11T20:00+09:00', end: '2014-06-11T22:00+09:00', y: 30, group: 0 },\n      // { x: '2014-06-12T21:00+09:00', end: '2014-06-12T22:00+09:00', y: 25, group: 0 },\n      // { x: '2014-06-13T22:00+09:00', end: '2014-06-13T22:00+09:00', y: 100, group: 0 },\n      // { x: '2014-06-14T23:00+09:00', end: '2014-06-14T23:10+09:00', y: 28, group: 0 },\n      // { x: '2014-06-15T01:00+09:00', end: '2014-06-15T02:00+09:00', y: 66, group: 0 },\n      // { x: '2014-06-16T03:00+09:00', end: '2014-06-16T07:00+09:00', y: 90, group: 0 },\n\n      // { x: '2014-06-11T22:00+09:00', y: 10, group: 1 },\n      // { x: '2014-06-12T22:00+09:00', y: 35, group: 1 },\n      // { x: '2014-06-13T22:00+09:00', y: 65, group: 1 },\n      // { x: '2014-06-14T23:10+09:00', y: 75, group: 1 },\n      // { x: '2014-06-15T02:00+09:00', y: 90, group: 1 },\n      // { x: '2014-06-16T07:00+09:00', y: 95, group: 1 },\n    ];\n\n    let totalPageRange = new models.PageRanges();\n    this.book.getReadPageRanges().forEach(readPage => {\n      totalPageRange.margeAll(readPage.pageRanges);\n\n      this.items.push({\n        x: this.datePipe.transform(readPage.startDate, 'y-MM-ddTHH:mm:ss'),\n        end: this.datePipe.transform(readPage.endDate, 'y-MM-ddTHH:mm:ss'),\n        y: readPage.pageRanges.getReadPages(),\n        group: 0\n      })\n\n      this.items.push({\n        x: this.datePipe.transform(readPage.endDate, 'y-MM-ddTHH:mm:ss'),\n        y: totalPageRange.getReadPages(),\n        group: 1\n      })\n    });\n\n    this.groups = [\n      {\n        id: 0,\n        content: '読書ページ数',\n        options: {\n          style:'bar'\n        }\n      },\n      {\n        id: 1,\n        content: '読書済みページ数',\n        options: {\n          // yAxisOrientation: 'right'\n        }\n      }\n    ];\n\n    let minDate = this.book.getMinReadingDate();\n    let maxDate = this.book.getMaxReadingDate();\n\n    this.options = {\n      width:  '100%',\n      legend: {\n        left:{\n          position:\"top-left\"\n        },\n        right:{\n          position:\"top-right\"\n        }\n      },\n      dataAxis: {\n        left: {\n          range: {\n            min: 0, max: this.book.pages\n          }\n        }\n      },\n      drawPoints: false,\n      interpolation: {\n        enabled: false,\n      },\n      // locale: navigator.language,\n      start: this.datePipe.transform(minDate, 'y-MM-ddT00:00'),\n      end: this.datePipe.transform(maxDate, 'y-MM-ddT23:59')\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/reading-chart/reading-chart.ts"],"sourceRoot":""}