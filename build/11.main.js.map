{"version":3,"sources":["../../src/pages/book/book.module.ts","../../src/pages/book/book.ts"],"names":[],"mappings":"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","file":"11.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BookPage } from './book';\n\n@NgModule({\n  declarations: [\n    BookPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BookPage),\n  ],\n  exports: [\n    BookPage\n  ]\n})\nexport class BookPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book/book.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, ViewController, AlertController, NavController, NavParams, ItemSliding } from 'ionic-angular';\nimport { AppReadingBookProvider, AppLoadingProvider } from '../../providers';\nimport { AppReadingBook, AppReadingLog } from '../../models'\n\n@IonicPage({\n  name: 'BookPage',\n  segment: 'book'\n})\n@Component({\n  selector: 'page-book',\n  templateUrl: 'book.html'\n})\nexport class BookPage {\n\n  book: AppReadingBook;\n  callback: (book: AppReadingBook) => {};\n  \n  constructor(\n    private params: NavParams,\n    // private viewCtrl: ViewController,\n    private navCtrl: NavController,\n    private alertCtrl: AlertController,\n    private appReadingBookProvider: AppReadingBookProvider,\n    private loading: AppLoadingProvider\n  ) {\n    this.book = new AppReadingBook(params.data.book);\n    this.callback = params.data.callback;\n  }\n\n  doSave(event: any) {\n\n    this.loading.start(() => {\n      if (this.book.id) {\n        return this.appReadingBookProvider.update(this.book).toPromise().then(\n          book => {\n            this.callback(this.book);\n            this.navCtrl.pop();\n          }\n        ).catch(() => {\n          let alert = this.alertCtrl.create({\n            title: 'エラー',\n            subTitle: '保存に失敗しました。',\n            buttons: ['OK']\n          });\n          alert.present();\n        })\n      } else {\n        return this.appReadingBookProvider.create(this.book).toPromise().then(\n          book => {\n            this.callback(this.book);\n            this.navCtrl.pop();\n          }\n        ).catch(() => {\n          let alert = this.alertCtrl.create({\n            title: 'エラー',\n            subTitle: '保存に失敗しました。',\n            buttons: ['OK']\n          });\n          alert.present();\n        })\n      }\n    });\n  }\n\n  doAdd(event: Event, book:AppReadingBook) {\n\n    this.navCtrl.push('LogPage', {log: null, callback: (log) => {\n\n      book.appReadingLogs.push(log);\n    }});\n  }\n\n  doEdit(event: Event, slidingItem: ItemSliding, book:AppReadingBook, log:AppReadingLog) {\n\n    this.navCtrl.push('LogPage', {log: log, callback: (log) => {\n\n      let index = book.appReadingLogs.findIndex(l => l.id == log.id);\n      if (index != -1) {\n        book.appReadingLogs.splice(index, 1, log);\n      }\n    }}).then(() => {\n      slidingItem.close();\n    });\n  }\n\n  doDelete(event: Event, slidingItem: ItemSliding, book:AppReadingBook, log:AppReadingLog) {\n\n    slidingItem.close();\n    let index = book.appReadingLogs.findIndex(l => l.id == log.id);\n    if (index != -1) {\n      book.appReadingLogs.splice(index, 1);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book/book.ts"],"sourceRoot":""}